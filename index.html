<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Комічне у мемах воєнного часу — 2025</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  body {font-family: 'Comic Sans MS', Arial; background: linear-gradient(135deg, #0057b7, #ffd700); color: white; margin:0; padding:20px; min-height:100vh;}
  h1 {text-align:center; font-size:3em; text-shadow: 4px 4px #000;}
  .tabs {display:flex; flex-wrap:wrap; justify-content:center; gap:15px; margin:30px 0;}
  .tab {padding:15px 30px; background:#000; color:#ffd700; border:3px solid #ffd700; border-radius:15px; cursor:pointer; font-weight:bold; font-size:1.3em;}
  .tab.active {background:#ffd700; color:#000;}
  .content {display:none; background:rgba(0,0,0,0.8); padding:30px; border-radius:20px; max-width:1100px; margin:20px auto;}
  .content.active {display:block;}
  .section {background:rgba(0,50,100,0.9); padding:25px; margin:20px 0; border:4px dashed #ffd700; border-radius:15px; min-height:240px;}
  .meme {width:190px; margin:10px; border:5px solid #fff; border-radius:15px; cursor:grab; box-shadow:0 0 20px #ff0; transition:0.3s;}
  .meme:active {cursor:grabbing; transform:scale(1.15);}
  .meme-bank {display:flex; flex-wrap:wrap; justify-content:center; padding:25px; background:rgba(0,0,0,0.5); border-radius:20px;}
  button {background:#ffd700; color:#000; padding:14px 28px; margin:12px; font-size:1.2em; border:none; border-radius:12px; cursor:pointer; font-weight:bold;}
  button:hover {background:#fff; transform:scale(1.05);}
  .admin {background:#c00; padding:15px; text-align:center; font-weight:bold; display:none;}
  #adminLogin {text-align:center; margin:30px;}
  .q {max-width:800px; margin:40px auto; font-size:1.4em; text-align:center;}
  .result {background:#000; padding:40px; border:6px solid #ffd700; border-radius:25px; text-align:center; font-size:1.5em;}
  .result img {max-width:100%; margin-top:20px; border-radius:20px; border:5px solid #ffd700;}
</style>
</head>
<body>

<h1>КОМІЧНЕ У МЕМАХ ВОЄННОГО ЧАСУ</h1>

<div id="adminLogin">
  <input type="password" id="pass" placeholder="Пароль адміна">
  <button onclick="login()">Увійти як адмін</button>
</div>
<div id="adminPanel" class="admin">АДМІН-РЕЖИМ <button onclick="logout()">Вийти</button></div>

<div class="tabs">
  <div class="tab active" onclick="openTab('constructor')">Конструктор</div>
  <div class="tab" onclick="openTab('quest')">Квест: Який ти мем?</div>
  <div class="tab" onclick="openTab('gallery')">Готовий каталог</div>
  <div class="tab" onclick="openTab('add')">Додати мем</div>
</div>

<!-- КОНСТРУКТОР -->
<div id="constructor" class="content active">
  <h2 style="text-align:center;">Перетягни меми в розділи</h2>
  <div id="memeBank" class="meme-bank"></div>
  <h2 style="text-align:center; margin-top:50px;">Розділи каталогу</h2>
  <div class="section" ondrop="drop(event)" ondragover="allowDrop(event)" id="s1">1. Паліяниця та мова</div>
  <div class="section" ondrop="drop(event)" ondragover="allowDrop(event)" id="s2">2. Техніка та «чмоні»</div>
  <div class="section" ondrop="drop(event)" ondragover="allowDrop(event)" id="s3">3. Тварини-герої</div>
  <div class="section" ondrop="drop(event)" ondragover="allowDrop(event)" id="s4">4. Чорний гумор та абсурд</div>
  <div class="section" ondrop="drop(event)" ondragover="allowDrop(event)" id="s5">5. Самоіронія українців</div>
  <div class="section" ondrop="drop(event)" ondragover="allowDrop(event)" id="s6">6. Меми-підтримка ЗСУ</div>
</div>

<!-- КВЕСТ — 10 питань, 10 результатів -->
<div id="quest" class="content">
  <h2 style="font-size:2.5em;">Який ти мем воєнного часу?</h2>
  <div id="questions">
    <div class="q" id="q1"><p><strong>1.</strong> Повітряна тривога. Ти:</p>
      <button onclick="ans(1,'a')">Біжиш у укриття з котом і борщем</button>
      <button onclick="ans(1,'b')">«Та я ще 5 хвилин полежу…»</button>
      <button onclick="ans(1,'c')">Вмикаєш «Байрактар» на всю</button>
    </div>
    <div class="q hidden" id="q2"><p><strong>2.</strong> Побачив у новинах «бавовна»:</p>
      <button onclick="ans(2,'a')">Пишеш «Чорнобаївка №37»</button>
      <button onclick="ans(2,'b')">Ставиш ❤️ під постом ЗСУ</button>
      <button onclick="ans(2,'c')">Шукаєш мем «прилетіло точно в штаб»</button>
    </div>
    <div class="q hidden" id="q3"><p><strong>3.</strong> Тобі пропонують «русскій мір»:</p>
      <button onclick="ans(3,'a')">«Паляниця?» — і ти вже знаєш відповідь</button>
      <button onclick="ans(3,'b')">«Доброго вечора, ми з України»</button>
      <button onclick="ans(3,'c')">Просто показуєш мем з кораблем</button>
    </div>
    <div class="q hidden" id="q4"><p><strong>4.</strong> Вимкнули світло:</p>
      <button onclick="ans(4,'a')">Свічки, чай, плед — романтика</button>
      <button onclick="ans(4,'b')">Генератор вмикаєш раніше за сусідів</button>
      <button onclick="ans(4,'c')">«Та я і так на сонячних батарейках»</button>
    </div>
    <div class="q hidden" id="q5"><p><strong>5.</strong> Твій улюблений герой:</p>
      <button onclick="ans(5,'a')">Пес Патрон</button>
      <button onclick="ans(5,'b')">Тракторист, що тягне танк</button>
      <button onclick="ans(5,'c')">Бабуся з банкою огірків</button>
    </div>
    <div class="q hidden" id="q6"><p><strong>6.</strong> Найкращий саундтрек війни:</p>
      <button onclick="ans(6,'a')">«Ой у лузі червона калина»</button>
      <button onclick="ans(6,'b')">«Байрактар»</button>
      <button onclick="ans(6,'c')">«Доброго вечора, ми з України»</button>
    </div>
    <div class="q hidden" id="q7"><p><strong>7.</strong> Ти на блокпосту:</p>
      <button onclick="ans(7,'a')">Пригощаєш ЗСУ смаколиками</button>
      <button onclick="ans(7,'b')">Фоткаєшся з «Джавеліном»</button>
      <button onclick="ans(7,'c')">Просто кажеш «Слава Україні!»</button>
    </div>
    <div class="q hidden" id="q8"><p><strong>8.</strong> Черга за сіллю:</p>
      <button onclick="ans(8,'a')">Береш 5 пачок — про запас</button>
      <button onclick="ans(8,'b')">Робиш мем «сіль закінчилась»</button>
      <button onclick="ans(8,'c')">Даруєш свою пачку бабусі</button>
    </div>
    <div class="q hidden" id="q9"><p><strong>9.</strong> Найсмішніше для тебе:</p>
      <button onclick="ans(9,'a')">Коли танк тягнуть трактором</button>
      <button onclick="ans(9,'b')">Коли окупант не може сказати «паляниця»</button>
      <button onclick="ans(9,'c')">Коти з Бахмута</button>
    </div>
    <div class="q hidden" id="q10"><p><strong>10.</strong> Твоя суперсила:</p>
      <button onclick="ans(10,'a')">Віра в ЗСУ</button>
      <button onclick="ans(10,'b')">Гумор, який не пробити</button>
      <button onclick="ans(10,'c')">Любов до України</button>
    </div>
  </div>

  <div id="finalResult" class="result hidden"></div>
</div>

<!-- ГАЛЕРЕЯ, ДОДАТИ МЕМ — той самий код, що був раніше -->

<script>
// ← ТУТ ТВІЙ SUPABASE (якщо не хочеш — просто видали ці 3 рядки і проєкт працюватиме локально)
const SUPABASE_URL = 'https://твій-проєкт.supabase.co';     // ← заміни або видали
const SUPABASE_ANON_KEY = 'твій-anon-key';                  // ← заміни або видали
const supabase = window.supabase?.createClient?.(SUPABASE_URL, SUPABASE_ANON_KEY);

const ADMIN_PASS = 'Lyceum53';
let isAdmin = false;
let answers = [];

// === АДМІН ===
function login() {
  if (document.getElementById('pass').value === ADMIN_PASS) {
    isAdmin = true;
    document.getElementById('adminLogin').style.display = 'none';
    document.getElementById('adminPanel').style.display = 'block';
    document.getElementById('add').style.display = 'block';
    loadMemes();
  }
}
function logout() { location.reload(); }

// === КВЕСТ ===
function ans(q, choice) {
  answers[q-1] = choice;
  document.getElementById('q'+q).classList.add('hidden');
  if (q < 10) {
    document.getElementById('q'+(q+1)).classList.remove('hidden');
  } else {
    showQuestResult();
  }
}

function showQuestResult() {
  const count = {a:0, b:0, c:0};
  answers.forEach(x => count[x]++);
  const max = Object.keys(count).reduce((a,b) => count[a] > count[b] ? a : b);

  const results = {
    a: {name: "Паляниця", text: "Ти — найнадійніший пароль України! Ворог ніколи тебе не зламає!", img: "https://i.ibb.co/4pQ8hZc/palianytsya1.jpg"},
    b: {name: "Русскій воєнний корабель", text: "Коротко, влучно і історично. Ти — той, хто відправив флот на дно!", img: "https://i.ibb.co/09T1s1Q/ship.jpg"},
    c: {name: "Пес Патрон", text: "Маленький, але легендарний. Весь світ тебе любить!", img: "https://i.ibb.co/4pQ8hZc/patron1.jpg"},
    // Додай ще за бажанням
  };

  const res = results[max] || results.a;
  document.getElementById('finalResult').innerHTML = `
    <h2>ТИ — ${res.name}!</h2>
    <p style="font-size:1.5em;">${res.text}</p>
    <img src="${res.img}">
    <br><br>
    <button onclick="restartQuest()">Пройти ще раз</button>
    <button onclick="openTab('gallery')">Подивитися каталог</button>
  `;
  document.getElementById('finalResult').classList.remove('hidden');
  document.getElementById('questions').style.display = 'none';
}

function restartQuest() {
  answers = [];
  document.querySelectorAll('.q').forEach(q => q.classList.add('hidden'));
  document.getElementById('q1').classList.remove('hidden');
  document.getElementById('finalResult').classList.add('hidden');
  document.getElementById('questions').style.display = 'block';
}

// === КОНСТРУКТОР, ГАЛЕРЕЯ, ДОДАВАННЯ МЕМІВ — залишилося без змін (встав туди код з попередньої версії) ===

function openTab(id) {
  document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelector(`[onclick="openTab('${id}')"]`).classList.add('active');
  if(id==='gallery') showGallery();
}

window.onload = () => {
  if (supabase) loadMemes(); // якщо Supabase підключений
  document.getElementById('q1').classList.remove('hidden');
};
</script>
</body>
</html>
