<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Комічне у мемах воєнного часу — Supabase версія</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  /* Твій попередній CSS тут — body, tabs, meme тощо */
  body {font-family: Arial; background: linear-gradient(135deg, #0057b7, #ffd700); color: white; margin:0; padding:20px;}
  .admin {background:#d40000; color:white; padding:15px; text-align:center; display:none;}
  button {background:#ffd700; color:#000; padding:12px; border:none; border-radius:10px; cursor:pointer;}
</style>
</head>
<body>
<h1>КОМІЧНЕ У МЕМАХ ВОЄННОГО ЧАСУ</h1>
<div id="auth">
  <input type="password" id="pass" placeholder="Пароль адміна">
  <button onclick="login()">Увійти</button>
</div>
<div id="adminPanel" class="admin" style="display:none;">АДМІН <button onclick="logout()">Вийти</button></div>

<div class="tabs">
  <button class="tab active" onclick="openTab('catalog')">Каталог</button>
  <button class="tab" onclick="openTab('add')">Додати мем</button>
  <button class="tab" onclick="openTab('categories')">Категорії</button>
</div>

<div id="catalog" class="content active"></div>
<!-- Інші div як раніше -->

<script>
// Твій Supabase config (заміни на свої з кроку 1)
const supabaseUrl = 'https://твій-проєкт.supabase.co'; // З дашборду
const supabaseKey = 'твій-anon-key'; // З дашборду
const supabase = Supabase.createClient(supabaseUrl, supabaseKey);

let isAdmin = false;
const ADMIN_PASS = 'slava2025'; // Змінюй!

async function login() {
  if (document.getElementById('pass').value === ADMIN_PASS) {
    isAdmin = true;
    document.getElementById('auth').style.display = 'none';
    document.getElementById('adminPanel').style.display = 'block';
    await loadEverything();
  } else alert('Неправильно!');
}

async function loadEverything() {
  // Завантажити меми
  const { data: memes } = await supabase.from('memes').select('*');
  renderCatalog(memes);

  // Завантажити категорії
  const { data: cats } = await supabase.from('categories').select('*');
  renderCategories(cats);
}

async function addMeme() {
  if (!isAdmin) return;
  const src = document.getElementById('imgUrl').value; // Або з file upload
  const cat = document.getElementById('catSelect').value;
  const kw = document.getElementById('keywords').value;
  const { data, error } = await supabase.from('memes').insert([{ src, category: cat, keywords: kw }]);
  if (error) alert(error); else loadEverything();
}

// Аналогічно для addCategory, deleteMeme (використовуй supabase.from('table').delete().eq('id', id))

function openTab(id) { /* Як раніше */ }
window.onload = () => { /* Початкове завантаження */ };
</script>
</body>
</html>
